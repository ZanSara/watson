{% extends "base_template.html" %}
{% block content %}

    <div class="text-center">
        <p class="lead">Ecco il tuo nuovo outfit!</p>
        
        <div class="container text-center">
            <div class="full-outfit">
                <img class="full-outfit" src="{{ full_outfit }}" onclick="$('#myModal').modal('show')">
                
                {% for item in items %}   
                    <a href="#1" style="border: 1px solid black; top: {{ item.top }}%; left: {{ item.left }}%; width: {{ item.width }}%; height: {{ item.height }}%;"></a>
                {% endfor %}
                
            </div>
        </div>
	    
    </div>
    
    
        
    
    <!-- Modal -->
    <div class="modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title text-center" id="myModalLabel">Ecco i vestiti simili che ho trovato</h4>
          </div>
          
          <div class="modal-body">
              <div class="row">
                
                {% for type in clothes_type %}
                <div class="col-md-4">
                
                    <p>{{ type.name }}</p>
                    <div id="carousel-{{type.code}}" class="carousel slide" data-ride="carousel" data-interval="false">
                      <!-- Indicators -->
                      <ol class="carousel-indicators">
                        {% set i = 0 %}
                        {% for item in type.images %}
                            <li data-target="#carousel-{{type.code}}" data-slide-to="{{ loop.index }}" {% if loop.index < 2 %} class="active" {% endif %}></li>
                            {% set i = i+1 %}
                        {% endfor %}
                      </ol>

                      <!-- Wrapper for slides -->
                      <div class="carousel-inner" role="listbox">
                        {% set i = 0 %}
                        {% for item in type.images %}
                            <div class="item {% if loop.index < 2 %} active {% endif %} carousel-image">
                              <img class="img-responsive center-block carousel-image" src="{{ item }}" alt="...">
                              <div class="carousel-caption">
                                <button class="btn btn-danger">Acquista {{ type.name }} {{ loop.index }}</button>
                              </div>
                            </div>
                        {% endfor %}
                        
                      </div>

                      <!-- Controls -->
                      <a class="left carousel-control" href="#carousel-{{type.code}}" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                      </a>
                      <a class="right carousel-control" href="#carousel-{{type.code}}" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                      </a>
                    </div>
                 
              
                </div>   
                {% endfor %}
            </div>  
          
          </div>
        </div>
      </div>
    </div>
    
    
    
    <script type="text/javascript">
        // lastPhotos sta in /static/js/utils.js
       	document.addEventListener('DOMContentLoaded',lastPhotos, false);
    </script>
    
    <script type="text/javascript">
	    //changing every 6 sec the text with a random phrase
		var text = [    "Understanding your style",
		                "Improving your style", 
		                "Learning the trends",
				        "Comparing the trends",
				        "Analizing your pictures",
				        "Computing similarities", 
				        "Predicting your tastes",
				        "Elaborating the outfits",
				        "Browsing the catalog",
				        "Looking for fashion websites" ];
				        
		var elem = document.getElementById("changeText");
		count = Math.floor((Math.random() * 10) + 0);
		elem.innerHTML = text[count];
		setInterval(change, 4000);
		
		function change() {
			//count keep values from 0 to 9
			count = Math.floor((Math.random() * 10) + 0);
			elem.innerHTML = text[count];
		}
	</script>
    
    
{% endblock %}
