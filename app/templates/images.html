{% extends "base_template.html" %}
{% block content %}

<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<div class="well">
        <h1 class="text-center">Hello World!</h1>
      </div>
      <div style="margin:5%;">
      <script>
      //It is necessary to install this extension of chrome
      //https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi?hl=en-US
      function lastPhotos(){
    	  var access_token=(window.location.href).split("=")[1]
    	  $.ajax({
  		    type: 'GET',
  		    url: 'https://api.instagram.com/v1/users/self/media/recent/?access_token='+access_token+"&count=10&callback=?",
  		    // Disable credentials as they were enabled by default
  		    xhrFields: {
  		        withCredentials: false
  		    },
  		    crossDomain: true,
  		    dataType: "jsonp",
  		    }).always(function(res) {
  		    console.log('Res from Instagram API', res);
  		  	for (i = 0; i < res.data.length; i++) { 
  		  	var photo = document.createElement("IMG");
  		  	photo.setAttribute("src", res.data[i].images.thumbnail.url);
		  	document.getElementById("image").appendChild(photo);
  			}
  		  	
  		    });
    	  
      }
          </script>
      <button onclick="lastPhotos()">Import Photos</button>
      <div id="image"></div>
      </div>
{% endblock %}